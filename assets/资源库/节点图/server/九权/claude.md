# 九权天部 Roguelike 核心机制设计

## 目录用途
存放"九权天部"Roguelike游戏核心机制的节点图脚本文件。

## 设计原则
1. **简单直观**：初始核心机制易于理解和实现
2. **模块化架构**：支持横向扩展（新能力、效果）和纵向深化（数值成长、机制组合）
3. **低耦合设计**：各系统独立运行，便于单独修改和扩展
4. **可组合性**：机制间可产生有趣的交互，鼓励多样化玩法
5. **平衡基础**：核心机制自带平衡约束，后续扩展有稳定基础

## 通用核心框架

### 资源管理系统
所有流派共享一个基础资源管理框架，包含以下核心组件：

| 组件 | 功能 | 扩展点 |
|------|------|--------|
| 资源类型 | 定义资源的名称、图标、基础属性 | 可添加新资源类型，支持多资源共存 |
| 资源生成 | 触发条件（攻击、击杀、移动等）+ 生成量 + 概率 | 可添加新触发条件，调整生成量和概率 |
| 资源上限 | 初始最大值，可通过升级/道具提升 | 支持动态上限调整 |
| 资源消耗 | 固定消耗或比例消耗，触发对应效果 | 支持多种消耗模式，可添加消耗减免 |
| 资源衰减 | 可选的自动衰减机制（如情绪值随时间降低） | 支持不同衰减速率和条件 |

### 效果应用系统
所有流派的技能/效果基于统一的效果框架：

| 组件 | 功能 | 扩展点 |
|------|------|--------|
| 效果类型 | 伤害、控制、增益、减益、召唤等 | 可添加新效果类型 |
| 效果参数 | 伤害值、持续时间、范围、概率等 | 支持参数动态计算（如基于资源量） |
| 效果触发 | 即时触发、持续触发、条件触发 | 支持复合触发条件 |
| 效果目标 | 自身、单个敌人、多个敌人、区域等 | 支持目标选择逻辑扩展 |
| 效果冲突 | 同类效果叠加规则（覆盖、叠加、取最高值） | 支持自定义冲突规则 |

## 各流派核心机制

### 1. 钦天监 - 因果命师
- **文件**：`钦天监_因果命师_因果链追踪.py`
- **核心资源**：因果点 (CP)
- **生成机制**：攻击命中时有10%概率获得1点CP，上限10点
- **消耗机制**：消耗固定CP值触发"必然效果"
- **效果框架**：必然暴击（初始效果）

### 2. 鸿胪寺 - 情绪织者
- **文件**：`鸿胪寺_情绪织者_情绪频谱共振.py`
- **核心资源**：三种情绪值（愤怒、恐惧、绝望）
- **生成机制**：攻击命中时根据敌人状态获得1点对应情绪值，每种情绪上限8点
- **消耗机制**：消耗3点同类型情绪值触发"情绪共振"
- **效果框架**：愤怒（范围伤害）、恐惧（群体减速）、绝望（降低攻击力）

### 3. 天工部 - 物质匠师
- **文件**：`天工部_物质匠师_物质属性编程.py`
- **核心资源**：物质核心 (MC)
- **生成机制**：攻击敌人或破坏环境获得1点MC，上限8点
- **消耗机制**：消耗4点MC修改自身武器属性，持续5秒
- **效果框架**：攻击力+50%、攻击范围+100%、攻击速度+50%

## 文档约定
- 本文件只描述目录用途、设计原则与机制概述
- 不在此列举具体的实现细节
- 各节点图文件内包含详细的扩展设计说明

## 当前状态
初始版本，包含三个核心流派的基础机制实现。

---
注意：本文件不记录任何修改历史。请始终保持对"目录用途、当前状态、注意事项"的实时描述。
