## 目录用途
- 承载执行流程在 UI 侧的策略层逻辑，例如执行协调、锚点选择、步骤跳过、重试与步骤摘要，负责把自动化执行器暴露的能力编排成“任务清单执行”所需的高阶流程。

## 当前状态
- `execution_coordinator.py`：协调缩放校验、快速映射、锚点坐标校准/视口定位与单步前的识别验证，并在识别通过后同步可见节点程序坐标，是连接 UI 控制面板与自动化执行器的入口；快速映射与单步校验统一依赖 editor_recognition 的三阶段匹配（唯一锚点→普通锚点→普通节点兜底），不再对外暴露“内点比例/误差阈值”等可调参数。
- `anchor_selector.py`：按照“创建 → 连接 → 配置”优先级或场景规则选择锚点，提供 `AnchorInfo`。
- `retry_handler.py`：收敛任务执行过程中的失败重试策略，维护最近成功锚点并在需要时回退重试；通过注入的 `ViewportController` 在重试前基于最近锚点对齐视口，避免直接访问执行器私有方法。
  - 重试策略只通过返回 `RetryResult` 向上层汇报结果，不直接发射 UI/Runner 的步骤事件信号；步骤级事件由执行线程统一在“最终结果”处回填。
- `step_skip_checker.py`：在连续执行与单步执行等模式下，根据可见性、距离与配置判断某些步骤是否可以跳过，并给出结构化原因（包括仅作为上下文参与的软跳过场景）；在与执行线程协作时，可以接收一个“可见节点映射提供器”，复用同一步内的可见性识别结果，避免在 UI 层对同一帧画面重复构建可见节点映射；在需要对齐视口时，仅通过注入的 `ViewportController.ensure_program_point_visible` 进行视口拖拽。
- `step_summary_builder.py`：根据步骤类型和诊断信息生成执行监控面板使用的摘要文案。
- 各策略模块只依赖执行器协议（`EditorExecutorProtocol`）/视口协议（`ViewportController`）和 `GraphModel`，不直接操作底层截图/OCR，以便替换执行器实现时复用。

## 注意事项
- 策略类不直接依赖 UI 控件，只通过传入的 executor、graph_model、monitor 等对象通信。
- 日志需复用 monitor/executor 提供的回调，保持输出格式一致（`·`、`✓`、`✗` 前缀）。
- 策略函数禁止使用 try/except，错误通过返回值或让上层感知。
- 当策略涉及视口或输入操作时，应通过 `ViewportController` 协议访问视口能力（例如 `ensure_program_point_visible` / `get_program_viewport_rect`），避免直接调用执行器实现类上的下划线私有方法。
- 策略模块只负责业务决策和日志描述，真正的输入/截图操作必须委托 `app.automation.editor`。
- 避免在此目录中引入硬编码路径或大型资源，任何视觉、模板或配置依赖都应通过上层注入。
- 若增加新的执行前检查或降级策略，应在协调器中明确记录触发条件和 UI 状态更新，确保监控面板能同步到位。


