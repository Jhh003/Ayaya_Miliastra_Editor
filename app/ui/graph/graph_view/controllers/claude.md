## 目录用途
存放图视图层面的交互控制器相关代码，负责节点图视图的键鼠事件分发、拖拽模式切换以及交互期间的性能调优逻辑。

## 当前状态
包含 `interaction_controller.py`，为 `GraphView` 提供统一的交互入口：管理滚轮缩放、画布平移（手抓模式）、框选、节点/连线选择与快捷键处理，并在不同交互阶段动态调整视图的更新模式和缓存策略。
- 在只读视图且开启 `GraphView.enable_click_signals` 的前提下，会将左键单击节点/连线/空白转换为 `graph_element_clicked` 信号，供上层页面（例如任务清单的图预览）做联动高亮与跳转，而不改变编辑模式下的交互行为。

## 注意事项
- 交互控制器假定宿主视图为 `QGraphicsView`，且由 `app.ui.graph.graph_view.GraphView` 持有并转发事件。
- 拖拽和平移逻辑会临时修改视图的缓存模式、视口更新模式与渲染提示，以平衡大图性能与视觉效果，恢复逻辑必须始终成对调用。
- 与布局 Y 调试、小地图、标尺等模块存在协作关系，修改交互行为时需要兼顾这些覆盖层的更新与位置同步。
- 右键/中键平移阶段会关闭高成本渲染提示，并临时禁用 `CacheBackground` 以避免网格在部分 Windows 环境下出现“分块错位/残影”；同时按缩放比例节流叠层更新，每次结束平移后会立即补齐小地图、悬浮层与 Y 调试卡片的位置。
- 缩放、滚动与节流判断路径都会主动调用 `_reposition_ydebug_tooltip`，确保调试卡片始终贴合其场景锚点。
- 左键交互（节点拖拽、RubberBand 框选、端口连线预览）期间会暂时关闭背景缓存并启用整视口更新，以避免框选矩形或连线预览在缩放/滚动后的残影；释放后由控制器统一恢复原有刷新与缓存策略。
- 交互层对节点/连线图形项的引用应从 `app.ui.graph.items.*` 直接导入，避免依赖 `graph_scene` 的“再导出”名称（以免在运行时缺失导致 ImportError）。


