# undo 子包

## 目录用途
封装撤销/重做相关的纯逻辑工具，包括命令栈、命令接口与撤销/重做管理器等，实现对图模型等数据结构的可撤销操作。

## 关键文件
- `undo_redo_core.py`：基础命令接口与命令栈实现，面向 `GraphModel` 等数据结构的纯模型命令与撤销/重做管理。

## 使用方式
- 引擎与上层应用通常通过 `engine.utils` 入口访问：
  - `from engine.utils import UndoRedoManager, Command`
  - 内部由 `engine.utils` 延迟导入 `undo_redo_core` 中的实现。

## 注意事项
- 保持对 UI 完全无依赖，仅操作数据模型。
- 命令执行、撤销、重做过程中不进行长耗时 I/O，必要时由上层协调。
- 移动节点等不持久化的操作应通过标记区分（例如 `affects_persistence = False`），由管理器判断是否存在“需要保存”的修改。

---
注意：本文件不记录修改历史，仅描述“目录用途、当前状态、注意事项”。请在结构调整后保持描述同步。

