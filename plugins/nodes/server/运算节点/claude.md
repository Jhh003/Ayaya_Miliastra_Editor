# Server 运算节点目录

## 目录用途
- 存放纯计算/转换类节点：数学运算、向量操作、位运算、结构体拆装、时间转换等。
- 节点只处理输入参数，输出新值，不触发游戏行为。

## 当前状态
- 函数均使用 `@node_spec` 描述端口与类型，部分共享逻辑在 `plugins.nodes.shared.server_运算节点_impl_helpers`。
- 通过静态注册表暴露给 `plugins.nodes.server`。
- 个别节点（如数据类型转换）仅依赖单输入/单输出端口，额外的“目标类型”等配置通过参数面板注入，非端口。

## 注意事项
- 避免在计算节点中访问游戏运行态或 UI，保持纯函数特性，方便测试与复用。
- 统一依赖 `engine.utils.logging.logger` 打印必要调试信息。
- 对需要多语言提示的常量或映射放入 shared helper，减轻节点文件体积。
- 泛型端口若只允许特定数据类型，使用 `@node_spec` 的 `input_generic_constraints` / `output_generic_constraints` 声明允许的中文类型列表，供验证器与编辑器侧一致识别。
- 基础算术节点（加减乘除、比较）及数据类型转换等核心节点已声明精确的泛型约束（例如限制为“整数/浮点数”），避免把“布尔值”等非数值类型误当作算术输入，并确保节点图在编写期即可暴露类型错误。
- 结构体相关运算节点（如“拼装结构体”“拆分结构体”）需要显式声明结构体选择端口与结构体实例/字段端口，端口名称与 `engine.graph.common` 中集中维护的结构体节点常量保持一致，便于 UI 与代码生成共享约定。
- 字典构造/拼装类运算节点需限定键和值的泛型：键限定为实体、GUID、整数、字符串、阵营、配置ID、元件ID，对应列表；值端口不接受字典类型，约束列表中不要加入泛型或泛型列表。


