# Server 执行节点目录

## 目录用途
- 服务器执行节点的集中地，涵盖战斗、背包、计时器、巡逻等“动作”指令。
- 每个 `.py` 文件实现一个节点函数，通过流程图调度触发。

## 当前状态
- 所有函数使用 `@node_spec` 声明端口类型与相关元数据（包含泛型约束与枚举候选项等），与 `plugins.nodes.shared.server_执行节点_impl_helpers` 等辅助库配合。
- 静态注册器自动收录，运行期通过 `plugins.nodes.server` 暴露。
- 部分与界面布局、角色技能相关的执行节点（例如切换当前界面布局、设置角色技能冷却等）依赖精确定义的枚举输入，便于在编辑器中通过下拉选项选择布局索引或技能槽位，而无需手填魔法数字或字符串。
- 包含用于排查逻辑的轻量调试类执行节点（如打印字符串），用于在运行日志中输出自定义文本。
- **配对列表按值排序**：将配对的两个列表（键列表 + 值列表）按值列表的数值进行联动排序，保持位置对应关系，支持升序/降序；用于武器展示词条中元素增伤/元素抗性按数值高低排序存储。

## 注意事项
- 仅依赖 `engine` 与 `plugins.nodes.shared`，避免引用 UI/自动化模块。
- 输出日志、调试信息统一走 `engine.utils.logging.logger`。
- 复杂的复用逻辑抽到 shared helper，保持节点文件聚焦于参数校验与调用顺序。
- 节点的端口命名需与底层图模型/代码生成管线约定保持一致，避免出现端口存在但类型信息无法匹配的情况；尤其是信号与结构体相关执行节点，需要包含用于选择资源的名称端口，其名称与 `engine.graph.common` 中的静态端口常量保持一致。
- 字典相关执行节点的字典端口统一使用“泛型字典”端口类型；键/值端口在 `@node_spec` 中通过 `input_generic_constraints` 声明具体允许类型：键仅支持实体、GUID、整数、字符串、阵营、配置ID、元件ID，值不允许字典类型，约束列表使用具体数据类型，不要放入泛型或泛型列表。


